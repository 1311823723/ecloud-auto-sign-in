name: 摩尔庄园每日自动签到

on:
  # # 1. 定时触发 (Cron 表达式)
  # schedule:
  #   # ⚠️注意：GitHub用的是 UTC 时间，比北京时间慢8小时
  #   # 下面这个代表 UTC 00:00，也就是北京时间 早上 08:00
  #   - cron: '0 0 * * *'
  
  # 2. 手动触发按钮 
  workflow_dispatch:

jobs:
  daily-sign-in:
    runs-on: ubuntu-latest # 使用最新的 Ubuntu 容器
    
    steps:
      # 第一步：把代码拉取下来
      - name: Checkout code
        uses: actions/checkout@v3

      # 第二步：配置 Python 环境
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9' # 建议用 3.8 或 3.9，比较稳

      # 第三步：安装依赖库
      - name: Install dependencies
        run: |
          pip install requests loguru
          # 如果项目里有 requirements.txt，也可以用 pip install -r requirements.txt

      # 第四步：运行脚本
      - name: Run Sign In Script
        # ⚠️关键：把 Secrets 注入成环境变量，脚本里的 os.getenv 才能读到
        env:
          MOLE_ACCOUNTS: ${{ secrets.MOLE_ACCOUNTS }}
          WECHAT_PARAMS: ${{ secrets.WECHAT_PARAMS }}
        run: python mole.py
